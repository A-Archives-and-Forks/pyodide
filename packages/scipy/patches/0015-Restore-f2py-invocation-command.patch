From e74a965b8d174ae20d01298f3716beb45bfb79d4 Mon Sep 17 00:00:00 2001
From: Agriya Khetarpal <74401230+agriyakhetarpal@users.noreply.github.com>
Date: Fri, 16 Aug 2024 23:31:19 +0530
Subject: [PATCH 15/15] Restore f2py invocation command

---
 tools/generate_f2pymod.py | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/tools/generate_f2pymod.py b/tools/generate_f2pymod.py
index b6bc02eb04..3da75c14d1 100644
--- a/tools/generate_f2pymod.py
+++ b/tools/generate_f2pymod.py
@@ -9,6 +9,7 @@ import argparse
 import os
 import re
 import subprocess
+import sys
 
 
 # START OF CODE VENDORED FROM `numpy.distutils.from_template`
@@ -283,7 +284,7 @@ def main():
 
     # Now invoke f2py to generate the C API module file
     if args.infile.endswith(('.pyf.src', '.pyf')):
-        p = subprocess.Popen(['f2py', fname_pyf,
+        p = subprocess.Popen([sys.executable, '-m', 'numpy.f2py', fname_pyf,
                             '--build-dir', outdir_abs], #'--quiet'],
                             stdout=subprocess.PIPE, stderr=subprocess.PIPE,
                             cwd=os.getcwd())
-- 
2.39.3 (Apple Git-146)

